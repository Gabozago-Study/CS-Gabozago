# Network
<br>

### TCP와 UDP
#
TCP
* 신뢰성을 보장하는 연결형 프로토콜
* 흐름제어, 혼잡제어를 제공
* 웹 HTTP 통신, 이메일, 파일 전송에서 사용

> TCP 흐름제어
> 
> 수신자와 송신자의 메시지 처리속도 차이를 해결하기 위한 방법
수신자는 윈도우 크기를 자신의 응답 헤더에 담아서 송신 측에게 전해주게 되고, 송신자는 상대방에게 데이터를 보낼 때 이 윈도우 크기를 확인

> TCP 오류제어
> 
> TCP 오류 제어는 수신자와 송신자의 패킷 오류 처리를 하는 방법
수신자가 송신자에게 명시적으로 NACK(부정응답)을 보내거나 송신자에게 ACK(긍정응답)가 오지 않거나 중복된 ACK가 계속 해서 오면 오류가 발생했다고 판단

> TCP 혼잡제어
> 
> 송신자와 네트워크(라우터)의 데이터 처리 속도 차이를 해결하기 위한 방법
> 
> 패킷 손실 시 파악되는 타임 아웃이나 중복된 ACK을 통해서 혼잡을 파악
ACK을 확인하지 않고도 보낼 수 있는 데이터 양인 CWND(Congestion Window)를 기반으로 동작


UDP
* 신뢰성을 보장하지 않는 비연결형 프로토콜
* 흐름제어, 혼잡제어를 제공하지 않음
* 속도가 중요한 서비스(스트리밍)에서 사용
* UDP 자체는 신뢰성을 보장하지 않지만 추가적인 정의를 통해 보장 가능 (HTTP/3에서 QUIC 프로토콜)
  
<br>

### HTTP와 HTTPS
#
HTTP
* HyperText Transfer Protocol
* 웹 상에서 클라이언트와 서버 간에 요청/응답(request/response)으로 정보를 주고 받을 수 있는 프로토콜
* TCP와 UDP를 사용하며, 80번 포트를 사용
* 비연결(Connectionless)
  * 클라이언트가 요청을 서버에 보내고 서버가 적절한 응답을 클라이언트에 보내면 바로 연결이 끊김
* 무상태(Stateless)
  * 연결을 끊는 순간 클라이언트와 서버의 통신은 끝나며 상태 정보를 유지하지 않음


HTTPS
* HyperText Transfer Protocol over Secure Socket Layer
* 웹 통신 프로토콜인 HTTP의 보안이 강화된 버전의 프로토콜
* HTTPS의 기본 TCP/IP 포트로 443번 포트를 사용
* 소켓 통신에서 일반 텍스트를 이용하는 대신에, 웹 상에서 정보를 암호화하는 SSL이나 TLS 프로토콜을 통해 세션 데이터를 암호화
  * 기밀성(사생활 보호), 데이터 무결성, ID 및 디지털 인증서를 사용한 인증을 제공
  * 보호의 수준은 웹 브라우저에서의 구현 정확도와 서버 소프트웨어, 지원하는 암호화 알고리즘에 달려있음

### HTTPS가 필요한 이유
#
* 클라이언트인 웹브라우저가 서버에 HTTP를 통해 웹 페이지나 이미지 정보를 요청하면 서버는 이 요청에 응답하여 요구하는 정보를 제공
* 웹 페이지(HTML)는 텍스트이고, HTTP를 통해 이런 텍스트 정보를 교환
* 이때 주고받는 텍스트 정보에 주민등록번호나 비밀번호와 같이 민감한 정보가 포함된 상태에서 네트워크 상에서 중간에 제3자가 정보를 가로챈다면 보안상 큰 문제가 발생
* 즉, 중간에서 정보를 볼 수 없도록 주고받는 정보를 암호화하는 방법인 HTTPS를 사용하는 것

### HTTPS의 원리와 장단점
#
* 공개키(비대칭키) 알고리즘 방식
  * 공개키: 모두에게 공개. 공캐키 저장소에 등록
  * 개인키(비공개키): 개인에게만 공개. 클라이언트-서버 구조에서는 서버가 가지고 있는 비공개키
* 클라이언트 -> 서버
  * 사용자의 데이터를 공개키로 암호화 (공개키를 얻은 인증된 사용자)
  * 서버로 전송 (데이터를 가로채도 개인키가 없으므로 복호화할 수 없음)
  * 서버의 개인키를 통해 복호화하여 요청 처리

장점
* 네트워크 상에서 열람, 수정이 불가능하므로 안전

단점
* 암호화를 하는 과정이 웹 서버에 부하를 줌
* HTTPS는 설치 및 인증서를 유지하는데 추가 비용이 발생
* HTTP에 비해 느림
* 인터넷 연결이 끊긴 경우 재인증 시간이 소요
  * 소켓(데이터를 주고 받는 경로) 자체에서 인증을 하기 때문에 인터넷 연결이 끊기면 소켓도 끊어져서 다시 HTTPS 인증이 필요

<br>

### IP 주소 체계
#
IPv4
* 현재 일반적으로 사용되는 주소 체계
* 32비트를 8비트로 단위로 점을 찍어 표기하는 방식
* 123.45.67.88 같은 방식으로 표기됨

IPv6
* IPv4의 주소의 개수가 부족 문제를 해결하기 위해 생긴 주소 체계
* 64비트를 16비트 단위로 점을 찍어 표기하는 방식
* 2001:db8::ff00:42:8329 같은 방식으로 표기됨

<br>

### DNS (Domin Name System)
#
도메인
* 네트워크 상에서 컴퓨터를 식별하는 호스트명

DNS
* 컴퓨터를 식별하는 호스트명인 도메인을 실제 서버와 연결 시켜주는 시스템

<br>

### 로드 밸런싱
#
로드 밸런서를 클라이언트와 서버 사이에 두고, 부하가 집중되지 않도록 여러 서버에 분산하는 방식
* Scale out 시에 사용
* Server Load Balancing이라고도 불림

로드 밸런서
* 로드 밸런싱 작업을 담당하는 장비

로드 밸런서의 역할
* NAT(Network Address Translation): 사설IP - 공인IP 전환
* Tunneling: 데이터를 캡슐화하여 연결된 노드만 캡슐을 해제할 수 있게 만듦
* DSR(동적 소스 라우팅): 요청에 대한 응답을 할 때 로드밸런서가 아닌 클라이언트의 IP로 응답

L4 로드 밸런싱
IP와 PORT 기반의 로드 밸런싱
* 보통 L4 스위치 장비로 로드밸런싱하며 가격이 비쌈
* VIP를 통한 로드 밸런싱은 L4 로드밸런싱
  
L7 로드 밸런싱
* URI, Payload, Http Header, Cookie 등 기반의 로드 밸런싱
* 보통 L7 스위치 장비로 로드밸런싱하며 가격이 비쌈
nginx나 apache를 통한 로드 밸런싱은 L7 로드밸런싱

> VIP(Virtual IP)
> 
> 여러 개의 실제 서버를 대표하는 가상의 IP로 DNS와 VIP를 연결하여 다수의 서버에 연결할 때 사용
VIP는 IP 기반의 로드 밸런싱하는 역할을 겸할 수 있음

<br>


### CORS(Cross Origin Resource Sharing)
#
CORS
* '교차 출처 리소스 공유'
* HTTP 헤더를 사용하여 한 출처(origin)에서 실행중인 웹 어플리케이션이 다른 출처(cross-origin)의 선택한 자원에 접근할 수 있는 권한을 부여하도록 브라우저에 알려주는 정책

CORS 해결 in SpringBoot
1. javax.servlet.Filters 사용하여 필터링하기
2. @CrossOrigin 어노테이션 사용 (클래스, 메서드 단위 설정)
3. WebMvcConfigurer에서 설정 (Bean 등록)
  
<br>


### GET 메서드와 POST 메서드
#
GET
* 가져오는 것(Select)
* 서버에서 어떤 데이터를 가져와서 보여주기 위한 용도의 메서드
* URL에 요청 정보를 붙여서 전송
* 요청 정보를 사용자가 쉽게 눈으로 확인할 수 있다.
  * POST 방식보다 보안상 취약하다.
* GET 방식은 캐싱을 사용할 수 있어 POST 방식보다 빠르다.

POST
* 수행하는 것(Insert, Update, Delete)
* 서버의 값이나 상태를 바꾸기 위한 용도의 메서드
* 요청 정보를 HTTP 패킷의 Body 안에 숨겨서 서버로 전송
* 클라이언트 쪽에서 데이터를 인코딩하여 서버로 전송하고, 이를 받은 서버 쪽이 해당 데이터를 디코딩
* GET 방식보다 보안상 안전

<br>

### RESTful API
#
REST
* HTTP URI를 통해 자원을 명시하고, HTTP METHOD를 통해 자원에 대한 CRUD를 적용하는 것을 의미한다.
* 자원(URI) + 행위(HTTP Method) + 표현
  * 자원 : client는 URI를 이용해서 자원을 지정하고 해당 자원에 대한 조작을 server에 요청g
  * 행위 : GET, POST, PUT, DELETE
  * 표현 : JSON, XML를 통해 데이터를 주고 받는 것이 일반적이다.

API(Application Programming Interface)
* 데이터와 기능의 집합을 제공하여 컴퓨터 프로그램간 상호작용하고 서로 데이터 교환을 가능하게 하는것

REST API
* REST 기반으로 서비스 API를 구현하는것

RESTful
* REST원리를 따르는 시스템을 RESTful 이라고 지칭한다.

<br>

### Session과 Cookie 차이는?
#
세션 (Session)
* 사용자 정보 파일을 서버 측에서 관리
* 서버에서 Client를 구분하기 위해 세션 ID를 부여
* 웹 브라우저가 서버에 접속해서 브라우저 종료할때까지 인증 상태 유지
* 서버에 저장하기 때문에 쿠키보다 보안에 좋다
* 사용자가 많아질수록 서버 메모리를 많이 차지하게 된다-> 브라우저가 종료되면 없어진다

쿠키 (Cookie)
* Client측(브라우저)에서 관리되는 작은 기록정보 파일
* 사용자 인증에 유효한 시간 명시가능
* 브라우저 종료되도 인증 유지


Session vs Cookie
* 사용자의 기록 정보가 저장되는 위치 : 쿠키-브라우저, 세션-서버
* 보안 : 세션이 서버에서 관리 되므로 더 좋다.
* 요청속도 : 쿠키가 빠르다. 세션은 서버에서 처리가 필요하기 때문이다.