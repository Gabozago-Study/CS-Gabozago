# RDBMS와 NoSQL의 차이

### RDBMS(Relational Database Management System)
#
RDBMS는 관계형 데이터베이스를 생성하고 수정하고 관리

**특징**
* 데이터는 엄격한 스키마(데이터 개체, 속성, 관계,제약조건)에 따라 table에 저장
* 각 열은 하나의 속성에 대한 정보를, 각 행은 각 열의 데이터 형식에 맞는 데이터가 저장
* 데이터 관리를 위해 테이블 간의 관계를 구조화하는 것이 중요
* 정해진 스키마에 따라 데이터를 저장하기 때문에 명확한 데이터 구조 보장
* 각 데이터에 맞게 테이블을 나눠서 저장하기 때문에 데이터 중복을 피해, 공간 절약
  
**단점**
* 관계로 인한 시스템 복잡도를 고려하여 구조화 해야한다
* 시스템이 복잡하면, query문이 복잡하고 성능 저하
* 수평적 확장 어려움, 대부분 수직적 확장, 한계에 직면할 수 있다
  
<br/>

### NoSQL(Not Only SQL)
#
비 관계형 모델을 이용한 데이터 저장 방식

**종류**
* Key-value 방식(Riak, Redis, Voldmort)
  * 키를 고유한 식별자로 사용하는 키-값 쌍으로 데이터를 저장한다.
  * 키-값 데이터베이스는 파티셔닝)이 가능하고, 수평 확장이 가능하다.
* Document 방식(MongoDB, CouchDB)
  * XML이나 JSON, YAML 같은 데이터 타입(document)을 이용해서 레코드를 저장한다.
* Big Table 방식(Hbase, Casandra)
  * key-value와 데이터 저장 방식은 동일
  * 보통의 NoSQL은 order by 같은 정렬 기능을 제공하지 않지만, 이 모델은 내부적으로 key를 정렬
  * 날짜나 선착순으로 보여줄 때 유용
* Graph 방식(Sones, Allegro Graph)
  * 데이터를 노드로 표현하고, 노드 사이의 관계를 화살표로 표현한다.
  
**특징**
* 데이터를 여러 대의 서버에 분산해 저장하고, 분산 시에 데이터를 상호 복제해 특정 서버에 장애가 발생했을 때도 데이터 유실이나 서비스 중지가 없는 형태의 구조 (분산처리와 병렬처리가 가능)
* Big Data 처리에 효과적
* JOIN에 대한 로직이 필요 없어서 쿼리 로직의 복잡도가 낮다.
* 테이블간의 복잡한 관계를 생각 안해도 된다.
* 스키마가 없어서, 유연하다. 언제든지 저장 데이터를 조정하고 새로운 필드 추가 가능
* 자주 변경되지 않는 데이터를 저장하기 유리하다
* 수평적 확장에 용이하고 읽기, 쓰기가 빠르다
  
**단점**
* 복잡한 조인 사용이 어려움
* 기본적으로 조인을 제공하지 않음
* 조인해서 데이터를 가지고 오는 로직을 구현하려면, Application에서 각 테이블로부터 데이터를 가져와서 합쳐야 함.
* 데이터의 일관성이 항상 보장되진 않음 (중복 데이터 존재 가능)
  * 따라서, 중복으로 저장된 데이터를 똑같이 업데이트해 주는 데 시간을 소모
* 인덱스 구조를 메모리에 저장하기 때문에 많은 인덱스를 사용하려면 충분한 메모리가 필요
  
<br/>

> ### 둘 중 어떤 것을 선택해야 할까?<br/>
> **SQL** <br/>
> * 앱의 여러 부분에서 관련된 데이터(ex. join)가 자주 변경되는 경우 (NoSQL이라면 항상 여러 컬렉션을 수정해야 함)<br/>
> * 명확한 스키마가 중요하며, 데이터 구조가 극적으로 변경되지 않을 때 <br/>
> 
> **NoSQL**<br/>
> * 정확한 데이터 요구사항을 알 수 없을 때<br/>
> * 읽기(read) 처리를 자주 하지만, 데이터를 자주 변경하지 않는 경우 (즉, 한 번의 변경으로 수십 개의 문서를 수정할 필요가 없는 경우)<br/>
> * 데이터베이스를 수평으로 확장해야 하는 경우<br/>
> * 막대한 양의 데이터를 다뤄야 하는 경우, 읽기/쓰기 처리량이 큰 경우)<br/>

<br/>

### Redis(Remote Dictionary System)
#
NoSQL 방식을 사용하는 인메모리 데이터베이스, Key-Value 형식으로 데이터를 저장하며 주로 캐쉬로 사용

**특징**
* 빠른처리 (read/write) 속도와 검증된 s/w 안정성 제공
* 다양한 데이터 구조 저장
* string, hash, lists, sets, sorted set, bitmap등

> ### Redis의 데이터 휘발을 막기 위한 방법
> snapshot 기능을 통해 디스크에 백업하거나 AOF(Append Only File) 기능을 통해 명령 쿼리를 저장해두고 서버가 셧다운 되면 재실행
> * snapshot: 특정 시점의 백업 및 복구에 유리, 빠르게 복구 가능, 서버가 다운되면 스냅샷 사이에 변경된 데이터 유실
> * AOF: 모든 write/update 연산 자체를 모두 log 파일로 기록, 서버가 실행되면 순차적으로 연산을 재실행하여 데이터를 복구, write 속도 빠름, 데이터 유실X, 데이터 사용량이 큼, 서버 restart 시 속도 느림

<br/>